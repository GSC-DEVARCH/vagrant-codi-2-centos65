<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-02-18 do 09:49 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>CODI-2 - DevEnv(s)</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Paul Massey" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CODI-2 - DevEnv(s)</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline2">1. Introduction</a>
<ul>
<li><a href="#orgheadline1">1.1. Installing in multiple STAGEs</a></li>
</ul>
</li>
<li><a href="#orgheadline3">2. Development Security</a></li>
<li><a href="#orgheadline8">3. UnifiedViews Installation</a>
<ul>
<li><a href="#orgheadline4">3.1. Installing UnifiedViews on the VM</a></li>
<li><a href="#orgheadline5">3.2. Installing UV in multiple STAGEs</a></li>
<li><a href="#orgheadline6">3.3. Installing UV offline</a></li>
<li><a href="#orgheadline7">3.4. Using MS Sql Server</a></li>
</ul>
</li>
<li><a href="#orgheadline9">4. FrontEnd Data Browser</a></li>
<li><a href="#orgheadline15">5. Environment Details</a>
<ul>
<li><a href="#orgheadline10">5.1. Main Software Versions</a></li>
<li><a href="#orgheadline13">5.2. Main Directories Impacted</a>
<ul>
<li><a href="#orgheadline11">5.2.1. Working Directory</a></li>
<li><a href="#orgheadline12">5.2.2. Logfiles</a></li>
</ul>
</li>
<li><a href="#orgheadline14">5.3. Services Created</a></li>
</ul>
</li>
<li><a href="#orgheadline16">6. Account Details</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
There are two CODI development environments available, these being:
</p>

<dl class="org-dl">
<dt>UnifiedViews 2.3.0 environment</dt><dd>which is defined by the
<b>install_uv_components.sh</b> script. The following tools are
included in this DevEnv once it has been fully constructed for
the unifiedviews installation:

<ul class="org-ul">
<li><b><a href="http://localhost:8080/unifiedviews">Unified Views 2.3.0</a>~</b> which is the main entry point to the
UnifiedViews system.</li>

<li><b><a href="http://localhost:8080/manager/html">Tomcat7 Management Page</a></b></li>

<li><b>MySQL</b></li>
</ul></dd>

<dt>Frontend Data Browser</dt><dd>the <b>install_frontend.sh</b> script
creates this enviroment. The resulting entry points are:

<ul class="org-ul">
<li><b><a href="http://data.consilium.europa.eu/browse">Frontend Browser</a></b></li>

<li><b><a href="http://localhost:8080/manager/html">Tomcat7 Management Page</a></b></li>
</ul></dd>
</dl>

<p>
Which one is provided depends on the installation intention, but in
bother cases the scripts function following a three stage
approach. These stages being defined:
</p>

<dl class="org-dl">
<dt>DOWNLOAD_BUILD</dt><dd>this is the default STAGE, which will likely
require a connection to the internet to allow downloading of
missing components to be recovered.</dd>
<dt>SAVE_BUILT</dt><dd>this will be used to create a <i>.tar.gz</i> file which
will be used during the final installation stage (at this point
there shouldn't be anything other that copying files required).</dd>
<dt>INSTALL_BUILT</dt><dd>Will copy the config-files, war and jar files to
the location required to execute the software component.</dd>
</dl>

<p>
<b>Note:</b> 
</p>
<ul class="org-ul">
<li>The UV environment does not contain virtuoso.</li>
<li>UV Plugins available are taken from docker-unified-views dpus.zip</li>
<li>Virtualbox Guest additions do not always work as expected.</li>
</ul>
</div>

<div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> Installing in multiple STAGEs</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Using the <i>install script</i> to setup for building and installing the
software offline is a multi-stage process (which can be starting once
the vagrant machine has been booted/created).
</p>

<p>
1./ Set the DOWNLOAD_ALLOWED variable to "yes" (when connected to the
    internet). Once logged in, in a terminal:
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=yes ./install_uv_components.sh
</p>
</blockquote>

<p>
2./ Build the system at least once (so that the downloads are cached
    in the /vagrant directory). Then:
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=no STAGE=SAVE_BUILT ./install_uv_components.sh 
</p>
</blockquote>

<p>
This will create a <i>BUILD.tar.gz</i> file which should contain
everything necessary to install the built software on a compatible
system
</p>

<p>
3./ Copy the <i>BUILD.tar.gz</i> directory onto the remote
    system. Uncompress it and untar it (<i>gzip -d BUILD.tar.gz; tar xvf
    BUILD.tar</i>).
</p>

<p>
4./ In the resulting directory, Rerun the installation script with the
    STAGE set to INSTALL_BUILT.
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=no STAGE=INSTALL_BUILT ./install_uv_components.sh
</p>
</blockquote>

<p>
Following this the links on the relevant links on the browser homepage
will provide access to those facilities which have been installed.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3"><span class="section-number-2">2</span> Development Security</h2>
<div class="outline-text-2" id="text-2">
<p>
The environment is intended as a disposable development evironment,
all development work should be placed in a source code repository:
</p>

<ul class="org-ul">
<li>Files in /vagrant are shared with the host system, so to backup
pipelines, etc. the files need to be moved there (or preferable
saved directly from this machine using git, svn, etc.).</li>

<li>Vagrant VM's are intended as development environments (i.e. to be
used behind a firewall, etc.), they are <b><i>not</i></b> intended to be
directly connected to the internet, without changes to all the
standard user accounts, public passwords, etc.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-2">
<h2 id="orgheadline8"><span class="section-number-2">3</span> UnifiedViews Installation</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">3.1</span> Installing UnifiedViews on the VM</h3>
<div class="outline-text-3" id="text-3-1">
<p>
This vagrant box is intended to mimic the approach which will be used
to installation on a clean system (such as one created by the <b>vagrant
up</b> command). There is no backing up of the system (none should be
needed initially). There are three basic STAGE settings
</p>

<dl class="org-dl">
<dt><i>DOWNLOAD_BUILD</i></dt><dd></dd>

<dt><i>SAVE_BUILT</i></dt><dd></dd>

<dt><i>INSTALL_BUILT</i></dt><dd></dd>
</dl>

<p>
The basic command structure to run has the form:
</p>

<blockquote>
<p>
cd <i>vagrant
sudo STAGE=&lt;stage&gt; ./install_uv_components.sh /email-account</i> <i>email-password</i>
</p>
</blockquote>

<p>
Depending on the <i>STAGE</i> this can take quite a while. <b>xxx</b> but should
result in the system being updated with UnifiedViews installed and
running (<b>Note</b> if some of the sites are unavailable for downloading,
then the downloading and installation will fail).
</p>

<p>
The <i>email-account</i> and <i>email-password</i> arguments will be used to
replace the default settings for sending emails during the pipeline
execution. If these are empty then nothing will be used (it will still
be necessary to update the default accounts in the interface. e.g. the
admin account email address).
</p>

<p>
The installation script will maintain a copy of the downloaded files
in the /vagrant/downloads directory with a view to reducting the cost
in the event of a rebuild of the systsem (downloading can be switched
off using a variable at the top of the script).
</p>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">3.2</span> Installing UV in multiple STAGEs</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Using the install script to setup for building and installing the
software offline is a multi-stage process (starting once the vagrant
machine has been booted/created).
</p>

<p>
1./ Set the DOWNLOAD_ALLOWED variable to "yes" (when connected to the
    internet). Once logged in, in a terminal:
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=yes ./install_uv_components.sh
</p>
</blockquote>

<p>
2./ Build the system at least once (so that the downloads are cached
    in the /vagrant directory). Then:
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=no STAGE=SAVE_BUILT ./install_uv_components.sh 
</p>
</blockquote>

<p>
This will create a <i>uv_build.tar.gz</i> file which should contain
everything necessary to install the built software on a compatible
system
</p>

<p>
3./ Copy the <i>uv_build.tar.gz</i> directory onto the remote
    system. Uncompress it and untar it (/gzip -d uv_build.tar.gz; tar
    xvf uv_build.tar).
</p>

<p>
4./ In the resulting directory, Rerun the installation script with the
    DOWNLOAD_ALLOWED variable set to "no" and STAGE set to INSTALL_BUILT.
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=no STAGE=INSTALL_BUILT ./install_uv_components.sh
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6"><span class="section-number-3">3.3</span> Installing UV offline</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Using the install script to setup for building and installing the
software offline is a multi-stage process.
</p>

<ul class="org-ul">
<li>The first is to construct a <i>uv_build.tar.gz</i> file which will contain
all that is needed for installation on the remote system (which is the 
result of the first two stages).</li>

<li>The <i>uv_build.tar.gz</i> file is copied to the remote system, unpacked and
then the execution of the final installation stage.</li>
</ul>

<p>
The following outlines the basic path required:
</p>

<p>
1./ Set the DOWNLOAD_ALLOWED variable to "yes" (when connected to the
    internet). Once logged in, in a terminal:
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=yes ./install_uv_components.sh <i>email-account</i> <i>email-password</i>
</p>
</blockquote>

<p>
2./ Build the system at least once (so that the downloads are cached
    in the /vagrant directory).
</p>

<p>
3./ Copy the vagrant directory onto the remote system.
</p>

<p>
4./ Rerun the installation script with the DOWNLOAD_ALLOWED variable
    set to "no".
</p>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">3.4</span> Using MS Sql Server</h3>
<div class="outline-text-3" id="text-3-4">
<p>
For testing purposes the assumption here is that <a href="https://github.com/fgrehm/vagrant-mssql-express.git">Vagrant Test Machine</a>
or <a href="https://github.com/leezu/vagrant-mssql-express/">2014</a> is up and running and that a database 'unifiedviews' has been
created. The UV config settings assume that this machine is available
and on the localhost. Once the machine is up and running, the
following which make sure the appropriate configuration files are used
(DB_CONNECTION=mssql which indicate the SQL Server config files needed
areo be used).
</p>

<blockquote>
<p>
sudo DOWNLOAD_ALLOWED=yes DB_CONNECTION=mssql ./install_uv_components.sh
</p>
</blockquote>

<p>
Notes:
</p>
<ul class="org-ul">
<li>The MS SQL Server test machine should only be used for testing
(otherwise you'll need to activate it, etc.).</li>
<li>The sqljdbc41.jar will need to be available.</li>
<li>Currently, UV 2.3.0 code is updated for mssql server (these
updated files are located in downloads/updated-java)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-2">
<h2 id="orgheadline9"><span class="section-number-2">4</span> FrontEnd Data Browser</h2>
<div class="outline-text-2" id="text-4">
<p>
&#x2026;
</p>
</div>
</div>
<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15"><span class="section-number-2">5</span> Environment Details</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">5.1</span> Main Software Versions</h3>
<div class="outline-text-3" id="text-5-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Component</b></th>
<th scope="col" class="org-right"><b>Version</b></th>
<th scope="col" class="org-left"><b>Pointer</b></th>
<th scope="col" class="org-left"><b>Notes</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CentOS</td>
<td class="org-right">6.5</td>
<td class="org-left"><a href="http://google.com/">http://google.com/</a></td>
<td class="org-left">Kernel 2.6.32<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>, 64 bit</td>
</tr>

<tr>
<td class="org-left">UnifiedViews</td>
<td class="org-right">2.3.0</td>
<td class="org-left"><a href="http://unifiedviews.eu/">http://unifiedviews.eu/</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">MySQL</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Firefox</td>
<td class="org-right">38.4.0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Java</td>
<td class="org-right">1.7</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Tomcat</td>
<td class="org-right">7.0.65</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Maven</td>
<td class="org-right">3.3.9</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">common editors</td>
<td class="org-right">-</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">emacs, vim, nano</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">5.2</span> Main Directories Impacted</h3>
<div class="outline-text-3" id="text-5-2">
</div><div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11"><span class="section-number-4">5.2.1</span> Working Directory</h4>
</div>

<div id="outline-container-orgheadline12" class="outline-4">
<h4 id="orgheadline12"><span class="section-number-4">5.2.2</span> Logfiles</h4>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">5.3</span> Services Created</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>unifiedviews-backend</li>
<li>tomcat</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16"><span class="section-number-2">6</span> Account Details</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>Basic Accounts Created while installing

<ul class="org-ul">
<li>unifiedviews :</li>
<li>tomcat7      :</li>
</ul></li>

<li><a href="http://localhost:8080/unifiedviews">Unified Views Account Details</a>::

<ul class="org-ul">
<li>Login account  : <i>admin</i></li>

<li>Login password : <i>test</i></li>
</ul></li>

<li>Mysql :

<ul class="org-ul">
<li>Login account  : <i>root</i></li>
<li>LOgin password : <i>root</i></li>
</ul></li>

<li><a href="http://localhost:8080/manager/html">Tomcat7 Manager</a> :

<ul class="org-ul">
<li>Login account  : <i>tomcat</i></li>
<li>Login password : <i>tomcat</i></li>
</ul></li>

<li>When using the mssql vagrnt machines (mssql admin 
account is)

<ul class="org-ul">
<li>Login account  : <i>sa</i></li>
<li>Login password : <i>#Sa&#x2026;!</i></li>
</ul></li>
</ul>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Hence using docker is not possible.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Paul Massey</p>
<p class="date">Created: 2016-02-18 do 09:49</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
